# 计算机组成与体系结构

[软件设计师中级备考笔记 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/394802434)

## 一、数据的表示





## 二、计算机的结构





## 三、Flynn分类法

[Flynn分类法](https://blog.csdn.net/m0_51262868/article/details/114498644)

根据不同的**指令流**和**数据流**组织方式，把计算机系统分成4类：

- SISD
- SIMD
- MISD
- MIMD

>  	M:Multiple  I:Instruction（指令）  S:Single  D:Data（数据）



## 四、CISC与RISC

   	 **CISC的英文全称为“`Complex Instruction Set Computer`”，即“复杂指令系统计算机”**，从计算机诞生以来，人们一直沿用CISC指令集方式。早期的桌面软件是按CISC设计的，并一直沿续到现在。目前，桌面计算机流行的x86体系结构即使用CISC。微处理器(CPU)厂商一直在走CISC的发展道路，包括Intel、AMD，还有其他一些现在已经更名的厂商，如TI(德州仪器)、IBM以及VIA(威盛)等。在CISC微处理器中，程序的各条指令是按顺序串行执行的，每条指令中的各个操作也是按顺序串行执行的。顺序执行的优点是控制简单，但计算机各部分的利用率不高，执行速度慢。CISC架构的服务器主要以IA-32架构(Intel Architecture，英特尔架构)为主，而且多数为中低档服务器所采用。
　　**RISC的英文全称为“`Reduced Instruction Set Computer`”，即“精简指令集计算机”**，是一种执行较少类型计算机指令的微处理器，起源于80年代的MIPS主机(即RISC机)，RISC机中采用的微处理器统称RISC处理器。这样一来，它能够以更快的速度执行操作(每秒执行更多百万条指令，即MIPS)。因为计算机执行每个指令类型都需要额外的晶体管和电路元件，计算机指令集越大就会使微处理器更复杂，执行操作也会更慢。

　　特点区别各方面如下：
　　**1、指令系统**

　　CISC：计算机的指令系统比较丰富，**有专用指令来完成特定的功能**。因此，**处理特殊任务效率较高**。

　　RISC：设计者把主要精力放在那些**经常使用的指令**上，尽量使它们具有简单高效的特色。对不常用的功能，常通过组合指令来完成。因此，**在RISC 机器上实现特殊功能时，效率可能较低**。但**<font color="blue">可以利用流水线技术和超标量技术加以改进和弥补</font>**。

　　**2、存储器操作**

　　CISC：机器的存储器操作**指令多**，**操作直接**。

　　RISC：对存储器操作**有限制**，使控制简单化。

　　**3、程序**

　　CISC：汇编语言程序编程相对简单，科学计算及复杂操作的程序社设计相对容易，效率较高。

　　RISC：汇编语言程序一般需要较大的内存空间，实现特殊功能时程序复杂，不易设计。

　　**4、中断**

　　CISC：机器是在一条指令执行**结束后**响应中断。

　　RISC：机器在一条指令执行的**适当地方**可以响应中断。

　　**5、CPU**

　　CISC：CPU包含有**丰富的**电路单元，因而功能强、面积大、功耗大。

　　RISC：CPU包含有**较少的**单元电路，因而面积小、功耗低。

　　**6、设计周期**

　　CISC：微处理器结构**复杂**，**设计周期长**。

　　RISC：微处理器结构**简单**，布局紧凑，**设计周期短**，且**易于采用最新技术**。

　　**7、用户使用**

　　CISC：微处理器结构复杂，功能强大，实现特殊功能容易。

　　RISC：微处理器结构简单，指令规整，性能容易把握，易学易用。

　　**8、应用范围**
　　CISC：机器则更适合于通用机。

　　RISC：由于RISC指令系统的确定与特定的应用领域有关，故RISC 机器更适合于专用机。

　　**功耗相关：**事实上，架构设计会极大地影响芯片总体功耗的走向。就CPU功耗来讲，RISC和CISC走了两条不一样的道路。**CISC走的是性能路线，先把性能做上去，功耗放一边（设计的偏好：性能  >  功耗）**。然后不断地考虑如何散热，什么金属片，风扇，水冷一起上。反正用在PC上，一般人也感觉不出耗电大会有什么明显的问题。**RISC走的是低功耗路线，面向的是需要用电池的场景**。**功耗低是第一原则，性能排第二（设计的偏好：功耗  >  性能）**。对一般人来讲，最常接触到的就是手机了。很长一段时间里，人们都在默默忍受着手机速度慢带来的各种延迟，卡顿。没办法，手机厂商不敢给你性能更高的CPU，否则电池半天就没电了。







## 五、流水线技术

### 1. 流水线执行时间计算

> ​		取值→分析→执行
>
> ​		每个步骤由不同的**部件**完成。如果完整等待一个流程执行完再执行下一个流程，看似没有造成时间浪费，但其实每个部件都有不同程度的空闲等待时间。
>
> ​		流水线技术就可以很好的减少这些空闲时间的浪费。提高各部分的利用率和指令的平均执行速度。

- **流水线周期**：为各部件执行时间最长的那一段。

- **流水线执行时间计算公式**：
  - **理论公式**：`1条指令完整执行的时间 + (指令条数 - 1) * 流水线周期`
  - **实际公式**：`一个完整指令的步骤数 * 流水线周期 + (指令条数 - 1) * 流水线周期`

> ​		解题步骤：先用理论公式计算结果，如果没有合适的答案，再使用实际公式计算结果。



### 2. 流水线吞吐量计算

​	在单位时间内流水线所完成的任务数量或输出的结果数量

> ​	TP = `指令条数 / 流水线执行时间`



- 最大吞吐量（理想状况）：1/△t（流水线周期）



### 3. 流水线加速比

​	完成同样一批任务，**不使用流水线时所用的执行时间**与**使用流水线时所用的执行时间**之比称为流水线的加速比。

- 注意：这里的“使用流水线时所用的执行时间”仍然按照 **理论公式 > 实际公式**的方式计算。



### 4. 流水线的效率计算

- 当每个步骤的时间片相差不大的时候，效率最高（紧凑）。

- 当每个步骤的时间片有的大、有的小时，效率最低（不紧凑）。



> E = `一条指令执行完成的完整时间 * 指令条数 / 流水线执行时间 * 一条完整指令的步骤数`



## 六、存储系统

### 1. Cache基操

- 寄存器也能存储数据，只是容量非常非常非常小而已
- **存储器速度关系**：寄存器 > Cache > 内存（主存） > 辅存（外存）

> - 引入Cache，性价比高，内存小，速度快。
>
> - 引入Cache的依据是：**程序的局部性原理**。这样就避免访问内存（主存）了。



### 2. 程序执行的 局部性原理

### （1）时间局部性

​		已经被执行过的程序，有很大的可能会马上被再次执行。



### （2）空间局部性

​		在数组中能更好的解释。即一块空间，在被访问过一次之后，立即又访问了一块**临近**它的一块空间。		



### （3）工作集理论

​		进程运行时，被**频繁访问**的页面集合。





## 七、总线系统





## 八、可靠性





## 九、校验码

> ​		网络通信并不总是可靠的，为了增加网络通信的可靠性，我们需要在传输的数据后加上一些冗余的码字。根据接收方是否能通过其纠正错误，分为：**检错码**与**纠错码**。
>
> ​		**纠错码的代价比检错码高**。

- **检错码**

  ​	接收方仅仅只能通过检错码**发现错误**，而真正纠正错误的过程需要通知发送方重新传递数据。



- **纠错码**

  ​	接收方能通过纠错码直接**纠正错误**。



### （1）循环冗余校验码-CRC（Cyclic Redundancy Check）







### （2）海明校验码













